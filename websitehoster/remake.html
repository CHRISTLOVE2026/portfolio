<html>
<head>
  <title>WILSON INTERIOR</title>
</head>
<style>

body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

header {
    background-color: #333;
    color: #fff;
    padding: 1em;
    text-align: center;
}

nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: space-between;
}

nav li {
    margin-right: 20px;
}

nav a {
    color: #fff;
    text-decoration: none;
}

#catalogProfileSct {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

#productSection {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
}

.product {
    margin: 20px;
    width: 200px;
    transition: transform 0.2s;
}

.product:hover {
    transform: scale(1.1);
}

.product img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 10px;
}

#cartSection {
    display: none;
    padding: 20px;
}

#cart-items {
    padding: 20px;
}

#checkoutBtn {
    background-color: #4CAF50;
    color: #fff;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
}

#AlertSection {
  width: 300px;
  padding-left: 20px;
  position: ;
  right: 30px;
  top: 520px;
  background-color: brown;
  display: none;
}

#paymentSection {
  display: none;
}

.btnDivClass {
    position: relative;
    width: 100px;
    height: 50px;
    left: 90%;
    top: -40px;
    transition: transform 0.2s;   
}

.btnDivClass:hover {
    transform: scale(1.1);
}

.imageViewer {
  width: 700px;
  height: 800px;
  position: absolute;
  top: 200px;
  left: 350px;
}

.catalog-viewer {
    width: 700px;
    height: 500px;
    align-items: center;
    position: absolute;
    top: 80px;
    left: 300px;
}


</style>
  <body>
    <header>
        <nav>
            <h1>WILSON INTERIOR</h1>
            <ul>
                <li><a href=""></a></li>                           
                <li><a href="#cart">Cart (0)</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h3 id="tel1">hello world</h3>

        <div class="btnDivClass" id="btnDivId">
            <button class="btnClass" onclick="goBackBtnFunc();">GO Back</button>
        </div>

        <section id="catalogProfileSct" style="background-color: green;">
            catalogProfileSct
            <!-- catalogProfile will be dynamically generated -->
        </section>

        <section id="productSection" style="background-color: rgb(22, 109, 116);">
            productSection
            <!-- catalogProfile will be dynamically generated -->
        </section>

        <section id="viewProductSection" style="background-color: rgb(116, 22, 96);">
            viewProductSection
            <!-- view catalog section -->
        </section>

        <section id="cartSection" style="background-color: rgb(105, 128, 0);">
            cartSection
            <h2>Your Cart</h2>
            <div id="cart-items"></div>
            <button class="checkout-btn" id="checkoutBtn">Checkout</buttonrhx>
        </section>
        
        <section id="AlertSection">
          <h3 id="AlertTeller"></h3>
          
          <button class="confirmed-btn" data-id=confirmedBtn>confirmed</button>
        </section>
        
        <section id="paymentSection">
          processing........
        </section>
    </main>

</body>
    <script>
  
  let theIds = ["tel1","catalogProfileSct","productSection","viewProductSection","cartSection","AlertSection","checkoutBtn","btnDivId"];
    
  theIds.forEach((item) => {
    item = document.getElementById(item);
  });
  
  Array.prototype.HowManyIndItemInArr = function(product){
    
  let count = 0;
    this.forEach((item) => {
      if(item === product){
        count ++
      }
    });
    return (count)
    
  }

 let totalGlobal = 0;

 let catalogList = [
    { id: 1, dataId: "c1", name: "Product 1", price: 100, image: "product1.jpg" },
    { id: 2, dataId: "c2", name: "Product 2", price: 200, image: "product2.jpg" },
    { id: 3, dataId: "c3", name: "Product 3", price: 300, image: "product3.jpg" },
];

 let childProductsList = [
    {},
    { id: 1, parentId: "c1", name: "Product 4", price: 100, image: "product4.jpg" },
    { id: 2, parentId: "c1", name: "Product 5", price: 200, image: "product5.jpg" },
    { id: 3, parentId: "c1", name: "Product 6", price: 300, image: "product6.jpg" },
];

 let cartArr = [];
 let productInCartArr = [];
 
 // create the element to be visible
catalogList.forEach((item) => {
    let Photos = "Photos";

    catalogProfileSct.innerHTML += `
        <div class="product">
            <img src="./${Photos}/${item.image}" alt="${item.name}" class="catalog-profile-pic" data-id="${item.dataId}" />
            <h3>${item.name}</h3>
            <p>click to view catalog</p>
        </div>
        `;
});


 document.addEventListener("click", (e) => {
    
     let Photos = "Photos";

     if (e.target.classList.contains("catalog-profile-pic")) {
        const productId = e.target.dataset.id;
        const product = catalogList.find((p) => p.dataId == productId);
        // tel1.innerHTML = product.name;

        catalogProfileSct.style.display = "none";
        productSection.style.display = "flex";

        productSection.innerHTML = `
             productSection
            <div class="product" style=" width: 60; height: 70px;">
                <img src="./${Photos}/${product.image}" alt="${product.name}" class="catalog-list" >
                <h3>${product.name}</h3>
            </div> 
            `;
      
        childProductsList[0] = product;
      
        // create the element to be visible
        childProductsList.forEach((item) => {
            
            if(item.parentId === productId){
                productSection.innerHTML += `
                        <div class="product">
                            <img src="./${Photos}/${item.image}" alt="${item.name}" class="catalog-list" >
                            <h3>${item.name}</h3>
                            <p>₦${item.price}</p>
                            <button class="add-to-cart" data-id=${item.id}>Add to Cart</button>
                        </div>
                        `;
            }else{
            // productSection.innerHTML = "";
            }
            
        });
        
     }else if (e.target.classList.contains("add-to-cart")) {
        
        const productId = e.target.dataset.id;
        const product = childProductsList.find((p) => p.id == productId);

        AlertSection.style.display = "none";
  
        cartArr.push(product);
        productInCartArr.push(product.name);
        updateCart();
        
    }else if (e.target.classList.contains("remove-from-cart")) {
        const productId = e.target.dataset.id;
        //const product = cart.find((p) => p.id == productId);
       // tel1.innerHTML = productId;
  
        cartArr.splice(productId,1);
        productInCartArr.splice(productId,1);
        
        updateCart();
        
        checkoutBtn.style.display = 'block';
        AlertSection.style.display = "none";
        
        if(cart.length <= 0) checkoutBtn.style.display = "none";
  
    }else if (e.target.classList.contains("checkout-btn")) {
      
        AlertSection.style.display = "block";
        AlertTeller.innerHTML = "<b><ul>ITEMS BREAK DOWN</ul></b> <br><br>";
      
      let newArray = removeDuplicates(productInCartArr).sort();
    
      newArray.forEach((item) => {
        
          AlertTeller.innerHTML += `
             <span class="item-li">${item}</span> : <span class="No-of-item">${ productInCartArr.HowManyIndItemInArr(item) }</span> <br>
          `;
        
      });
    
      AlertTeller.innerHTML += `<br><br><br> <b>total :  ₦${totalGlobal}</b>`;
  
    }else if (e.target.classList.contains("confirmed-btn")) {
     
      catalogProfileSct.style.display = "none";
      productSection.style.display = "none";
      viewProductSection.style.display = "none";
      cartSection.style.display = "none";
      AlertSection.style.display = "none";
      btnDivId.style.display = "none";
      tel1.style.display = "none";
    
    // display new page
      document.getElementById("paymentSection").style.display = "block";
   } 

     // ........................
     // this helps us get a better view of the catalog
     if (e.target.classList.contains("catalog-list")) {
         viewProductSection.style.display = "block";
         viewProductSection.innerHTML = `<img src="${e.target.src}" alt="" class="catalog-viewer" />`;
        
     }else{
         viewProductSection.innerHTML = "";
     }

     //.......................
});

// Update cart
function updateCart() {
  
  cartSection.style.display = "block";
  viewProductSection.style.display = "none";
  
    const cartItems = document.getElementById('cart-items');
    cartItems.innerHTML = '';
    let total = 0;
    cartArr.forEach((item,index) => {
        cartItems.innerHTML += `
         <div class="product">
            <p>${item.name} - ₦${item.price}</p> 
            <button class="remove-from-cart" data-id=${index}>Delete</button>
         </div>
        `;
        
        total += item.price;
        totalGlobal = total;
    });
    
    //document.querySelector('nav a[href="                                              
    document.getElementById('checkoutBtn').innerHTML = `Checkout ₦${total}`;
}
function displayAllFunc(){

      catalogProfileSct.style.display = "flex";
      productSection.style.display = "flex";
      viewProductSection.style.display = "block";
      cartSection.style.display = "block";
      AlertSection.style.display = "block";
      btnDivId.style.display = "block";
      tel1.style.display = "block";
    

}
function goBackBtnFunc(){
    catalogProfileSct.style.display = "flex";
    
    productSection.style.display = "none";
    viewProductSection.style.display = "none";

}
function removeDuplicates(arr) {
  // Create a new Set from the array to automatically remove duplicates
  const uniqueSet = new Set(arr);

  // Convert the Set back into an Array using the spread syntax
  const uniqueArray = [...uniqueSet];

  return uniqueArray;
}
function countDuplicates(arr) {
    const counts = {};
    let duplicateCount = 0;

    // 1. Count occurrences of each element
    for (const element of arr) {
        counts[element] = (counts[element] || 0) + 1;
    }

    // 2. Iterate through the counts to find duplicates
    for (const element in counts) {
        // A duplicate is any element that appeared more than once
        if (counts[element] > 1) {
            // The number of extra occurrences IS the number of duplicates for that specific value
            // e.g., if "a" appears 3 times, there are 2 duplicates of "a"
            duplicateCount += (counts[element] - 1);
        }
    }

    return duplicateCount;
}


 

</script>
</head>
</html>